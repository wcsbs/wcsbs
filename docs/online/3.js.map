{"version":3,"sources":["webpack:///src/components/ClassTeam.vue","webpack:///./src/components/ClassTeam.vue?8d21","webpack:///./src/components/ClassTeam.vue","webpack:///./src/components/ClassTeam.vue?d97b","webpack:///./src/components/ClassTeam.vue?39a9"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AAEA;AACA,mBADA;AAEA;AACA;AAAA;AAAA;AAAA;AADA,GAFA;AAKA;AACA;AACA;AADA;AAGA,GATA;AAUA,8BACA,yDACA,WADA,EAEA,YAFA,EAGA,mBAHA,EAIA,kBAJA,EAKA,iBALA,EADA,CAVA;AAmBA,SAnBA,qBAmBA;AACA;AACA,GArBA;AAsBA;AACA,cADA,sBACA,KADA,EACA,KADA,EACA;AACA;AACA;AACA;;AAEA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAAA;AAAA;AACA,KAfA;AAgBA,gBAhBA,wBAgBA,KAhBA,EAgBA;AACA;AACA;;AAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AAEA;AAAA;AAAA;AACA,KA3BA;AA4BA,aA5BA,qBA4BA,KA5BA,EA4BA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA,KAlCA;AAmCA,aAnCA,uBAmCA;AAnCA;AAtBA,G;;;;;;;;;;;;AC7EA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,qCAAqC,6BAA6B,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,EAAE;AACnD;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,gCAAgC;AACxE;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,0CAA0C,kBAAkB;AAC5D;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,qBAAqB;AAC3D;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7JA;AAAA;AAAA;AAAA;AAAwF;AAC3B;AACL;;;AAGxD;AAC0F;AAC1F,gBAAgB,2GAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,IAAU;AACd,YAAY,mBAAO,CAAC,wGAA4G;AAChI,cAAc,mBAAO,CAAC,uDAAK;AAC3B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,sBAAsB,qHAAgD,EAAE;AAAA;AACxE;AACA,gBAAgB,oFAAM;AACtB,yBAAyB,6FAAe;AACxC,OAAO;AACP,KAAK;AACL;AACA;AACA;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA,wCAAsR,CAAgB,0UAAG,EAAC,C;;;;;;;;;;;;ACA1S;AAAA;AAAA;AAAA;AAAA;AAAA","file":"3.js","sourcesContent":["<template>\n  <div>\n    <b-card class=\"text-center\" :header=\"classTeam.name\">\n      <b-card-text v-if=\"classTeam.dummy\">\n        将删除 {{ classTeam.members.length }} 名学员\n      </b-card-text>\n      <b-card-text v-else-if=\"classTeam.id == null\">\n        共有 {{ classTeam.members.length }} 名学员未分组\n      </b-card-text>\n      <b-card-text v-else>\n        本组共有 {{ classTeam.members.length }} 名学员\n      </b-card-text>\n      <b-input-group\n        v-for=\"(member, index) in classTeam.members\"\n        :key=\"member.id + index\"\n        :prepend=\"\n          classTeam.id == null || classTeam.dummy\n            ? '学员：'\n            : !classTeam.dummy && index == 0\n            ? '组长：'\n            : '组员：'\n        \"\n        class=\"mt-3\"\n      >\n        <b-form-input\n          v-if=\"classInfo.forAdmin\"\n          readonly\n          :value=\"`(${index + 1}) ${member.name}`\"\n        ></b-form-input>\n        <b-form-input\n          v-else-if=\"classInfo.practiceId\"\n          readonly\n          :value=\"\n            `(${index + 1}) ${member.name} -- 总计${\n              classInfo.practiceName\n            }：${member.count\n              .toString()\n              .replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')}\n            `\n          \"\n        ></b-form-input>\n        <b-form-input\n          v-else\n          readonly\n          :value=\"\n            `(${index + 1}) ${member.name} -- 总计出席：${member.count}\n            `\n          \"\n        ></b-form-input>\n        <b-input-group-append>\n          <div v-if=\"classInfo.forAdmin\">\n            <b-form-select\n              v-if=\"classTeam.id == null\"\n              v-model=\"member.assignedTeamId\"\n              :options=\"classTeamOptions\"\n              v-on:change=\"assignTeam($event, index)\"\n            ></b-form-select>\n            <b-button\n              v-if=\"!classTeam.dummy && classTeam.id && index > 0\"\n              variant=\"info\"\n              v-on:click=\"setLeader(index)\"\n              >设为组长</b-button\n            >\n            <b-button variant=\"warning\" v-on:click=\"removeMember(index)\">{{\n              classTeam.dummy ? \"恢复\" : \"删除\"\n            }}</b-button>\n          </div>\n        </b-input-group-append>\n      </b-input-group>\n    </b-card>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport { RESET_STUDENTS } from \"../store/actions.type\";\n\nexport default {\n  name: \"ClassTeam\",\n  props: {\n    classTeam: { type: Object, required: true }\n  },\n  data: function() {\n    return {\n      canAddSubmodule: false\n    };\n  },\n  computed: {\n    ...mapGetters([\n      \"classInfo\",\n      \"classTeams\",\n      \"classTeamsChanged\",\n      \"classTeamOptions\",\n      \"removedStudents\"\n    ])\n  },\n  mounted() {\n    this.refreshUI();\n  },\n  methods: {\n    assignTeam(value, index) {\n      console.log(`selected: ${value} index: ${index}`);\n      const member = this.classTeam.members[index];\n      this.classTeam.members.splice(index, 1);\n\n      for (var i = 0; i < this.classTeams.length; i++) {\n        const team = this.classTeams[i];\n        if (team.id == member.assignedTeamId) {\n          member.assignedTeamId = null;\n          team.members.push(member);\n          break;\n        }\n      }\n      this.$store.dispatch(RESET_STUDENTS, { changed: true });\n    },\n    removeMember(index) {\n      const member = this.classTeam.members[index];\n      this.classTeam.members.splice(index, 1);\n\n      if (this.classTeam.id) {\n        this.classTeams[0].members.push(member);\n      } else {\n        this.removedStudents.push(member);\n      }\n\n      this.$store.dispatch(RESET_STUDENTS, { changed: true });\n    },\n    setLeader(index) {\n      const member = this.classTeam.members[index];\n      this.classTeam.members.splice(index, 1);\n      this.classTeam.members.splice(0, 0, member);\n\n      this.$store.dispatch(RESET_STUDENTS, { changed: true });\n    },\n    refreshUI() {}\n  }\n};\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    [\n      _c(\n        \"b-card\",\n        { staticClass: \"text-center\", attrs: { header: _vm.classTeam.name } },\n        [\n          _vm.classTeam.dummy\n            ? _c(\"b-card-text\", [\n                _vm._v(\n                  \"\\n      将删除 \" +\n                    _vm._s(_vm.classTeam.members.length) +\n                    \" 名学员\\n    \"\n                )\n              ])\n            : _vm.classTeam.id == null\n            ? _c(\"b-card-text\", [\n                _vm._v(\n                  \"\\n      共有 \" +\n                    _vm._s(_vm.classTeam.members.length) +\n                    \" 名学员未分组\\n    \"\n                )\n              ])\n            : _c(\"b-card-text\", [\n                _vm._v(\n                  \"\\n      本组共有 \" +\n                    _vm._s(_vm.classTeam.members.length) +\n                    \" 名学员\\n    \"\n                )\n              ]),\n          _vm._l(_vm.classTeam.members, function(member, index) {\n            return _c(\n              \"b-input-group\",\n              {\n                key: member.id + index,\n                staticClass: \"mt-3\",\n                attrs: {\n                  prepend:\n                    _vm.classTeam.id == null || _vm.classTeam.dummy\n                      ? \"学员：\"\n                      : !_vm.classTeam.dummy && index == 0\n                      ? \"组长：\"\n                      : \"组员：\"\n                }\n              },\n              [\n                _vm.classInfo.forAdmin\n                  ? _c(\"b-form-input\", {\n                      attrs: {\n                        readonly: \"\",\n                        value: \"(\" + (index + 1) + \") \" + member.name\n                      }\n                    })\n                  : _vm.classInfo.practiceId\n                  ? _c(\"b-form-input\", {\n                      attrs: {\n                        readonly: \"\",\n                        value:\n                          \"(\" +\n                          (index + 1) +\n                          \") \" +\n                          member.name +\n                          \" -- 总计\" +\n                          _vm.classInfo.practiceName +\n                          \"：\" +\n                          member.count\n                            .toString()\n                            .replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\") +\n                          \"\\n          \"\n                      }\n                    })\n                  : _c(\"b-form-input\", {\n                      attrs: {\n                        readonly: \"\",\n                        value:\n                          \"(\" +\n                          (index + 1) +\n                          \") \" +\n                          member.name +\n                          \" -- 总计出席：\" +\n                          member.count +\n                          \"\\n          \"\n                      }\n                    }),\n                _c(\"b-input-group-append\", [\n                  _vm.classInfo.forAdmin\n                    ? _c(\n                        \"div\",\n                        [\n                          _vm.classTeam.id == null\n                            ? _c(\"b-form-select\", {\n                                attrs: { options: _vm.classTeamOptions },\n                                on: {\n                                  change: function($event) {\n                                    return _vm.assignTeam($event, index)\n                                  }\n                                },\n                                model: {\n                                  value: member.assignedTeamId,\n                                  callback: function($$v) {\n                                    _vm.$set(member, \"assignedTeamId\", $$v)\n                                  },\n                                  expression: \"member.assignedTeamId\"\n                                }\n                              })\n                            : _vm._e(),\n                          !_vm.classTeam.dummy && _vm.classTeam.id && index > 0\n                            ? _c(\n                                \"b-button\",\n                                {\n                                  attrs: { variant: \"info\" },\n                                  on: {\n                                    click: function($event) {\n                                      return _vm.setLeader(index)\n                                    }\n                                  }\n                                },\n                                [_vm._v(\"设为组长\")]\n                              )\n                            : _vm._e(),\n                          _c(\n                            \"b-button\",\n                            {\n                              attrs: { variant: \"warning\" },\n                              on: {\n                                click: function($event) {\n                                  return _vm.removeMember(index)\n                                }\n                              }\n                            },\n                            [\n                              _vm._v(\n                                _vm._s(_vm.classTeam.dummy ? \"恢复\" : \"删除\")\n                              )\n                            ]\n                          )\n                        ],\n                        1\n                      )\n                    : _vm._e()\n                ])\n              ],\n              1\n            )\n          })\n        ],\n        2\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./ClassTeam.vue?vue&type=template&id=9abc4d16&\"\nimport script from \"./ClassTeam.vue?vue&type=script&lang=js&\"\nexport * from \"./ClassTeam.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/donghao/Documents/code/buddha/wcsbs/code/wcsbs-online/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('9abc4d16')) {\n      api.createRecord('9abc4d16', component.options)\n    } else {\n      api.reload('9abc4d16', component.options)\n    }\n    module.hot.accept(\"./ClassTeam.vue?vue&type=template&id=9abc4d16&\", function () {\n      api.rerender('9abc4d16', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/ClassTeam.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClassTeam.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClassTeam.vue?vue&type=script&lang=js&\"","export * from \"-!../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"1d050412-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClassTeam.vue?vue&type=template&id=9abc4d16&\""],"sourceRoot":""}