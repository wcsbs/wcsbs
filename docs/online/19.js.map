{"version":3,"sources":["webpack:///src/views/SessionManagement.vue","webpack:///./src/views/SessionManagement.vue?2e56","webpack:///./src/views/SessionManagement.vue","webpack:///./src/views/SessionManagement.vue?0f6d","webpack:///./src/views/SessionManagement.vue?daed"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,2BADA;AAEA;AACA,kFADA;AAEA;AAFA,GAFA;AAMA,8BACA,yDACA,mBADA,EAEA,WAFA,EAGA,eAHA,EAIA,gBAJA,EAKA,cALA,EAMA,qBANA,EAOA,WAPA,EADA,CANA;AAiBA,kBAjBA,4BAiBA,EAjBA,EAiBA,IAjBA,EAiBA,IAjBA,EAiBA;AACA;AACA;AACA,KAFA;AAGA,GArBA;AAsBA;AACA;AACA,oBADA;AAEA,4BAFA;AAGA;AAAA;AAAA,OAHA;AAIA;AAAA;AAAA;AAJA;AAMA,GA7BA;AA8BA;AACA,kBADA,0BACA,UADA,EACA;AACA;AACA,KAHA;AAIA,eAJA,yBAIA;AACA;AACA;AACA,KAPA;AAQA,iBARA,2BAQA;AACA;AACA,KAVA;AAWA,cAXA,wBAWA;AACA;AACA;AACA,oBADA;AAEA;AAFA;AAIA;AACA,kCADA;AAEA;AAFA;AAIA;AAEA;AAEA,mBACA,OADA,CACA,OADA,EACA,OADA,EAEA,IAFA,CAEA;AACA;AACA;AADA,WAGA,IAHA,CAGA;AACA;AAEA;AAAA;AAAA;AACA,SAPA,EAQA,KARA,CAQA;AACA;AACA,SAVA;AAWA,OAdA,EAeA,KAfA,CAeA;AACA;AACA,OAjBA;AAkBA;AA3CA;AA9BA,G;;;;;;;;;;;;ACzEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,YAAY,0CAA0C,EAAE;AAC9E;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,uBAAuB,kCAAkC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,2BAA2B,wBAAwB;AACnD;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,iBAAiB,oCAAoC;AACrD;AACA;AACA;AACA;AACA;AACA,8BAA8B,iBAAiB;AAC/C,2BAA2B;AAC3B,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,qBAAqB;AACvD;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,qBAAqB;AACvD,+BAA+B;AAC/B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjIA;AAAA;AAAA;AAAA;AAAgG;AAC3B;AACL;;;AAGhE;AAC0F;AAC1F,gBAAgB,2GAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,IAAU;AACd,YAAY,mBAAO,CAAC,wGAA4G;AAChI,cAAc,mBAAO,CAAC,uDAAK;AAC3B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,sBAAsB,gIAAwD,EAAE;AAAA;AAChF;AACA,gBAAgB,4FAAM;AACtB,yBAAyB,qGAAe;AACxC,OAAO;AACP,KAAK;AACL;AACA;AACA;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA,wCAA8R,CAAgB,kVAAG,EAAC,C;;;;;;;;;;;;ACAlT;AAAA;AAAA;AAAA;AAAA;AAAA","file":"19.js","sourcesContent":["<template>\n  <div>\n    <div v-if=\"isLoadingSessions\">\n      正在获取课程详情...\n    </div>\n    <div v-else>\n      <h3 v-text=\"classInfo.name\" />\n      <div v-if=\"!classInfo.forAdmin\">\n        <DownloadReport :forSelf=\"true\" worksheet=\"出席统计\" />\n        <hr />\n      </div>\n      <div class=\"input-group mb-3\">\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          aria-describedby=\"basic-addon2\"\n          v-model=\"filterText\"\n          v-on:change=\"filterSessions(filterText)\"\n          placeholder=\"搜索\"\n        />\n        <div class=\"input-group-append\">\n          <button\n            class=\"btn btn-outline-secondary\"\n            type=\"button\"\n            @click=\"clearFilter\"\n          >\n            清除\n          </button>\n          <b-button\n            variant=\"warning\"\n            v-if=\"classInfo.forApplication\"\n            v-on:click=\"applyClass()\"\n            >我要报名</b-button\n          >\n          <b-button\n            variant=\"warning\"\n            v-if=\"\n              !classInfo.forApplication && (isClassAdmin || isTeachingAssistant)\n            \"\n            @click=\"createSession\"\n            >{{ creatingSession ? \"取消创建\" : \"创建新课\" }}</b-button\n          >\n        </div>\n      </div>\n      <div v-if=\"classSessions.length === 0\">\n        没有找到上课记录！\n      </div>\n      <ClassSession\n        v-if=\"creatingSession\"\n        :classInfo=\"classInfo\"\n        :classSession=\"newClassSession\"\n      />\n      <ClassSession\n        v-for=\"(classSession, index) in classSessions\"\n        :classInfo=\"classInfo\"\n        :forApplication=\"classInfo.forApplication\"\n        :forAdmin=\"classInfo.forAdmin\"\n        :classSession=\"classSession\"\n        :sessionDetails=\"sessionDetails[index]\"\n        :key=\"classSession.id + index\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport ClassSession from \"@/components/ClassSession\";\nimport DownloadReport from \"@/components/DownloadReport\";\nimport { FETCH_SESSIONS, FILTER_SESSIONS } from \"../store/actions.type\";\nimport store from \"@/store\";\nimport Parse from \"parse\";\n\nexport default {\n  name: \"SessionManagement\",\n  components: {\n    ClassSession,\n    DownloadReport\n  },\n  computed: {\n    ...mapGetters([\n      \"isLoadingSessions\",\n      \"classInfo\",\n      \"classSessions\",\n      \"sessionDetails\",\n      \"isClassAdmin\",\n      \"isTeachingAssistant\",\n      \"isStudent\"\n    ])\n  },\n  beforeRouteEnter(to, from, next) {\n    store.dispatch(FETCH_SESSIONS, to.params).then(() => {\n      next();\n    });\n  },\n  data: function() {\n    return {\n      filterText: \"\",\n      creatingSession: false,\n      newClassSession: { dummy: true },\n      newAttendance: { dummy: true }\n    };\n  },\n  methods: {\n    filterSessions(filterText) {\n      this.$store.dispatch(FILTER_SESSIONS, filterText);\n    },\n    clearFilter() {\n      this.filterText = \"\";\n      this.$store.dispatch(FILTER_SESSIONS, this.filterText);\n    },\n    createSession() {\n      this.creatingSession = !this.creatingSession;\n    },\n    applyClass() {\n      const classId = this.classInfo.id;\n      const options = {\n        okText: \"确认\",\n        cancelText: \"取消\"\n      };\n      const message = {\n        title: this.classInfo.name,\n        body: `顶礼上师三宝！真的要报名？`\n      };\n      const thisComponent = this;\n\n      console.log(`applyClass - classId: ${classId}`);\n\n      this.$dialog\n        .confirm(message, options)\n        .then(function() {\n          Parse.Cloud.run(\"class:apply\", {\n            classId\n          })\n            .then(result => {\n              console.log(`class:apply - result: ${JSON.stringify(result)}`);\n\n              thisComponent.$router.push({ name: \"home\" });\n            })\n            .catch(e => {\n              console.log(`error in class:apply: ${e}`);\n            });\n        })\n        .catch(e => {\n          console.log(`error: ${e}`);\n        });\n    }\n  }\n};\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", [\n    _vm.isLoadingSessions\n      ? _c(\"div\", [_vm._v(\"\\n    正在获取课程详情...\\n  \")])\n      : _c(\n          \"div\",\n          [\n            _c(\"h3\", { domProps: { textContent: _vm._s(_vm.classInfo.name) } }),\n            !_vm.classInfo.forAdmin\n              ? _c(\n                  \"div\",\n                  [\n                    _c(\"DownloadReport\", {\n                      attrs: { forSelf: true, worksheet: \"出席统计\" }\n                    }),\n                    _c(\"hr\")\n                  ],\n                  1\n                )\n              : _vm._e(),\n            _c(\"div\", { staticClass: \"input-group mb-3\" }, [\n              _c(\"input\", {\n                directives: [\n                  {\n                    name: \"model\",\n                    rawName: \"v-model\",\n                    value: _vm.filterText,\n                    expression: \"filterText\"\n                  }\n                ],\n                staticClass: \"form-control\",\n                attrs: {\n                  type: \"text\",\n                  \"aria-describedby\": \"basic-addon2\",\n                  placeholder: \"搜索\"\n                },\n                domProps: { value: _vm.filterText },\n                on: {\n                  change: function($event) {\n                    return _vm.filterSessions(_vm.filterText)\n                  },\n                  input: function($event) {\n                    if ($event.target.composing) {\n                      return\n                    }\n                    _vm.filterText = $event.target.value\n                  }\n                }\n              }),\n              _c(\n                \"div\",\n                { staticClass: \"input-group-append\" },\n                [\n                  _c(\n                    \"button\",\n                    {\n                      staticClass: \"btn btn-outline-secondary\",\n                      attrs: { type: \"button\" },\n                      on: { click: _vm.clearFilter }\n                    },\n                    [_vm._v(\"\\n          清除\\n        \")]\n                  ),\n                  _vm.classInfo.forApplication\n                    ? _c(\n                        \"b-button\",\n                        {\n                          attrs: { variant: \"warning\" },\n                          on: {\n                            click: function($event) {\n                              return _vm.applyClass()\n                            }\n                          }\n                        },\n                        [_vm._v(\"我要报名\")]\n                      )\n                    : _vm._e(),\n                  !_vm.classInfo.forApplication &&\n                  (_vm.isClassAdmin || _vm.isTeachingAssistant)\n                    ? _c(\n                        \"b-button\",\n                        {\n                          attrs: { variant: \"warning\" },\n                          on: { click: _vm.createSession }\n                        },\n                        [\n                          _vm._v(\n                            _vm._s(\n                              _vm.creatingSession ? \"取消创建\" : \"创建新课\"\n                            )\n                          )\n                        ]\n                      )\n                    : _vm._e()\n                ],\n                1\n              )\n            ]),\n            _vm.classSessions.length === 0\n              ? _c(\"div\", [_vm._v(\"\\n      没有找到上课记录！\\n    \")])\n              : _vm._e(),\n            _vm.creatingSession\n              ? _c(\"ClassSession\", {\n                  attrs: {\n                    classInfo: _vm.classInfo,\n                    classSession: _vm.newClassSession\n                  }\n                })\n              : _vm._e(),\n            _vm._l(_vm.classSessions, function(classSession, index) {\n              return _c(\"ClassSession\", {\n                key: classSession.id + index,\n                attrs: {\n                  classInfo: _vm.classInfo,\n                  forApplication: _vm.classInfo.forApplication,\n                  forAdmin: _vm.classInfo.forAdmin,\n                  classSession: classSession,\n                  sessionDetails: _vm.sessionDetails[index]\n                }\n              })\n            })\n          ],\n          2\n        )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./SessionManagement.vue?vue&type=template&id=18fdf82f&\"\nimport script from \"./SessionManagement.vue?vue&type=script&lang=js&\"\nexport * from \"./SessionManagement.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/donghao/Documents/code/buddha/wcsbs/code/wcsbs-online/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('18fdf82f')) {\n      api.createRecord('18fdf82f', component.options)\n    } else {\n      api.reload('18fdf82f', component.options)\n    }\n    module.hot.accept(\"./SessionManagement.vue?vue&type=template&id=18fdf82f&\", function () {\n      api.rerender('18fdf82f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/SessionManagement.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionManagement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionManagement.vue?vue&type=script&lang=js&\"","export * from \"-!../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"86bf7e4e-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionManagement.vue?vue&type=template&id=18fdf82f&\""],"sourceRoot":""}