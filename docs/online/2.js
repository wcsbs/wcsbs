((typeof self !== 'undefined' ? self : this)["webpackJsonp"] = (typeof self !== 'undefined' ? self : this)["webpackJsonp"] || []).push([[2],{

/***/ "./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/ClassSession.vue?vue&type=script&lang=js&":
/*!*********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/ClassSession.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es7.object.get-own-property-descriptors */ "./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js");
/* harmony import */ var core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.dom.iterable */ "./node_modules/core-js/modules/web.dom.iterable.js");
/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es6.object.keys */ "./node_modules/core-js/modules/es6.object.keys.js");
/* harmony import */ var core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es7.array.includes */ "./node_modules/core-js/modules/es7.array.includes.js");
/* harmony import */ var core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es6.string.includes */ "./node_modules/core-js/modules/es6.string.includes.js");
/* harmony import */ var core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es6.array.sort */ "./node_modules/core-js/modules/es6.array.sort.js");
/* harmony import */ var core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es6.function.name */ "./node_modules/core-js/modules/es6.function.name.js");
/* harmony import */ var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _Users_donghao_Documents_code_buddha_wcsbs_code_wcsbs_online_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty */ "./node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js");
/* harmony import */ var parse__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! parse */ "./node_modules/parse/index.js");
/* harmony import */ var parse__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(parse__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! vuex */ "./node_modules/vuex/dist/vuex.esm.js");









function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_Users_donghao_Documents_code_buddha_wcsbs_code_wcsbs_online_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//


/* harmony default export */ __webpack_exports__["default"] = ({
  name: "ClassSession",
  props: {
    classSession: {
      type: Object,
      required: true
    },
    sessionDetails: {
      type: Object,
      required: false
    },
    classInfo: {
      type: Object,
      required: false
    },
    newSessions: {
      type: Array,
      required: false
    },
    forApplication: Boolean,
    forAdmin: Boolean,
    classId: String
  },
  data: function data() {
    return {
      session: this.classSession.dummy ? {
        creating: true,
        editing: true,
        submodules: []
      } : this.initSession(),
      moduleDropdownOptions: [],
      submoduleDropdownOptions: [],
      editing: this.classSession.dummy,
      canAddSubmodule: false
    };
  },
  computed: _objectSpread({}, Object(vuex__WEBPACK_IMPORTED_MODULE_9__["mapGetters"])(["isClassAdmin", "isTeachingAssistant", "isStudent"])),
  mounted: function mounted() {
    this.refreshUI();
  },
  methods: {
    initSession: function initSession() {
      return {
        id: this.classSession.id,
        forApplication: this.classInfo ? this.classInfo.forApplication : this.forApplication,
        name: this.classSession.get("name"),
        submodules: [].concat(this.sessionDetails.submodules),
        materials: this.classSession.get("content").materials ? [].concat(this.classSession.get("content").materials) : [],
        description: this.classSession.get("description"),
        scheduledAt: this.classSession.get("scheduledAt"),
        scheduledAtLocalDateTimeString: this.toLocalDateTimeString(this.classSession.get("scheduledAt")),
        showMoreDetails: false,
        attendanceState: this.toAttendanceStateString(this.sessionDetails),
        prestudyState: this.toPrestudyStateString(this.sessionDetails, 0)
      };
    },
    refreshUI: function refreshUI() {
      var _this = this;

      this.moduleDropdownOptions = [];
      this.submoduleDropdownOptions = [];

      if (!this.editing) {
        return;
      }

      this.moduleDropdownOptions = this.classInfo.modules.map(function (e) {
        return {
          value: e.id,
          text: e.name
        };
      });
      var session = this.session;
      var selectedModule;

      for (var i = 0; i < this.classInfo.modules.length; i++) {
        selectedModule = this.classInfo.modules[i];

        if (!session.moduleId || session.moduleId == selectedModule.id) {
          if (!session.moduleId) {
            session.moduleId = selectedModule.id;
          }

          this.submoduleDropdownOptions = this.submoduleDropdownOptions.concat(selectedModule.newSubmodules);
          console.log("refreshUI - selectedModule: ".concat(selectedModule.name));
          break;
        }
      }

      if (!this.classSession.dummy && selectedModule) {
        for (i = 0; i < this.sessionDetails.submodules.length; i++) {
          var submodule = this.sessionDetails.submodules[i];

          if (submodule.moduleId == selectedModule.id) {
            this.submoduleDropdownOptions.push(submodule);
            console.log("refreshUI - pushed: ".concat(submodule.name));
          }
        }
      }

      if (!this.classInfo.singleSubmodule && selectedModule) {
        var _loop = function _loop() {
          var submodule = _this.session.submodules[i];

          if (submodule.moduleId == selectedModule.id) {
            _this.submoduleDropdownOptions = _this.submoduleDropdownOptions.filter(function (e) {
              return e.id != submodule.id;
            });
          }
        };

        for (i = 0; i < this.session.submodules.length; i++) {
          _loop();
        }
      }

      if (this.submoduleDropdownOptions.length > 0) {
        this.submoduleDropdownOptions.sort(function (s1, s2) {
          var a = s1.index;
          var b = s2.index;
          return a > b ? 1 : b > a ? -1 : 0;
        });
        var selectedSubmodule = this.classInfo.singleSubmodule && !this.classSession.dummy ? this.session.submodules[0] : this.submoduleDropdownOptions[0];
        console.log("refreshUI - selectedSubmodule: ".concat(selectedSubmodule.name));
        this.session.submoduleId = selectedSubmodule.id;
        this.canAddSubmodule = !this.classInfo.singleSubmodule;
      } else {
        this.canAddSubmodule = false;
      }

      this.submoduleDropdownOptions = this.submoduleDropdownOptions.map(function (e) {
        return {
          value: e.id,
          text: e.name
        };
      });
    },
    addSubmodule: function addSubmodule() {
      var session = this.session;
      console.log("addSubmodule - moduleId: ".concat(session.moduleId, " submoduleId: ").concat(session.submoduleId));
      var selectedModule;
      var selectedSubmodule;

      for (var i = 0; i < this.classInfo.modules.length; i++) {
        selectedModule = this.classInfo.modules[i];

        if (!session.moduleId || session.moduleId == selectedModule.id) {
          console.log("addSubmodule - selectedModule: ".concat(selectedModule.name));
          break;
        }
      }

      if (this.sessionDetails) {
        for (i = 0; i < this.sessionDetails.submodules.length; i++) {
          var submodule = this.sessionDetails.submodules[i];

          if (submodule.id == session.submoduleId) {
            selectedSubmodule = submodule;
            break;
          }
        }
      }

      if (!selectedSubmodule && selectedModule) {
        for (i = 0; i < selectedModule.newSubmodules.length; i++) {
          var _submodule = selectedModule.newSubmodules[i];

          if (_submodule.id == session.submoduleId) {
            selectedSubmodule = _submodule;
            session.submodules.push(selectedSubmodule);

            if (!session.name || this.classInfo.singleSubmodule) {
              session.name = selectedSubmodule.name;
            }

            break;
          }
        }
      }

      if (!this.classInfo.singleSubmodule) {
        this.refreshUI();
      }

      if (selectedSubmodule) {
        console.log("addSubmodule - selectedSubmodule: ".concat(selectedSubmodule.name));
      }
    },
    removeSubmodule: function removeSubmodule(index) {
      this.session.submodules.splice(index, 1);
      this.refreshUI();
    },
    addMaterial: function addMaterial() {
      this.session.materials.push({
        name: this.session.materialName,
        url: this.session.materialUrl
      });
      this.session.materialName = "";
      this.session.materialUrl = "";
    },
    removeMaterial: function removeMaterial(index) {
      this.session.materials.splice(index, 1);
    },
    toLocalDateTimeString: function toLocalDateTimeString(date) {
      var options = {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "numeric",
        minute: "numeric"
      };
      return date.toLocaleDateString("zh-CN", options);
    },
    toLocalDateString: function toLocalDateString(date) {
      var options = {
        year: "numeric",
        month: "short",
        day: "numeric"
      };
      return date.toLocaleDateString("zh-CN", options);
    },
    needToShowAttendanceButton: function needToShowAttendanceButton() {
      // console.log(
      //   `needToShowAttendanceButton - this.isStudent: ${this.isStudent} this.forAdmin: ${this.forAdmin} this.forApplication: ${this.forApplication}`
      // );
      return this.isStudent && !this.forAdmin && !this.forApplication; // const scheduledAt = this.classSession.get("scheduledAt");
      // if (this.isStudent) {
      //   const today = new Date();
      //   //student must submit sessionDetails within 3 days
      //   var cutoffTime = new Date(
      //     scheduledAt.getTime() + 4 * 24 * 60 * 60 * 1000
      //   );
      //   cutoffTime.setHours(0, 0, 0, 0); //set to midnight
      //   // console.log(`needToShowAttendanceButton - cutoffTime: ${cutoffTime}`);
      //   return today.getTime() < cutoffTime.getTime();
      // }
      // return false;
    },
    toAttendanceStateString: function toAttendanceStateString(sessionDetails) {
      if (sessionDetails) {
        if (typeof sessionDetails.attendance.attendance == "number") {
          return "".concat(sessionDetails.attendance.attendance, "\u4EBA\u5DF2\u4E0A\u8BFE");
        }

        if (sessionDetails.attendance.onLeave) {
          return "请假";
        }

        if (sessionDetails.attendance.attendance == true) {
          return "已上课";
        }

        if (sessionDetails.attendance.attendance == false && sessionDetails.attendance.onLeave == undefined) {
          return "未上课";
        }
      }

      return "未报出席";
    },
    toPrestudyStateString: function toPrestudyStateString(sessionDetails, index) {
      if (this.forApplication) {
        return "请在课前看完传承/法本";
      }

      var chuanCheng = "未看传承";
      var faBen = "未看法本";

      if (sessionDetails && sessionDetails.submodules[index].studyRecord) {
        var studyRecord = sessionDetails.submodules[index].studyRecord;

        if (typeof studyRecord.lineage == "number") {
          chuanCheng = "".concat(studyRecord.lineage, "\u4EBA\u5DF2\u770B\u4F20\u627F");
        } else if (studyRecord.lineage) {
          chuanCheng = "已看传承";
        }

        if (typeof studyRecord.textbook == "number") {
          faBen = "".concat(studyRecord.textbook, "\u4EBA\u5DF2\u770B\u6CD5\u672C");
        } else if (studyRecord.textbook) {
          faBen = "已看法本";
        }
      }

      return "".concat(chuanCheng, "/").concat(faBen);
    },
    attendanceButtonName: function attendanceButtonName() {
      var d = new Date();

      if (d < this.classSession.get("scheduledAt")) {
        if (this.sessionDetails.attendance.onLeave) {
          return "取消请假";
        }

        return "我要请假";
      } else {
        if (this.sessionDetails.attendance.attendance != undefined) {
          return "我要改出席";
        }

        return "我要报出席";
      }
    },
    updateAttendance: function updateAttendance() {
      var d = new Date();
      var msg = "确认";
      var attendance = this.sessionDetails.attendance;

      if (d < this.classSession.get("scheduledAt")) {
        if (attendance.onLeave) {
          attendance.onLeave = false;
          msg += "取消请假";
        } else {
          attendance.onLeave = true;
          attendance.attendance = false;
          msg += "请假";
        }
      } else {
        if (attendance.attendance) {
          attendance.attendance = false;
          msg += "没有上课";
        } else {
          attendance.attendance = true;
          msg += "已上课";
        }
      }

      var classId = this.classId ? this.classId : this.classInfo.id;
      var sessionId = this.classSession.id;
      var options = {
        okText: "确认",
        cancelText: "取消",
        loader: true // default: false - when set to true, the proceed button shows a loader when clicked; and a dialog object will be passed to the then() callback

      };
      var message = {
        title: this.session.name,
        body: msg + "?"
      };
      var thisComponent = this;
      this.$dialog.confirm(message, options).then(function (dialog) {
        parse__WEBPACK_IMPORTED_MODULE_8___default.a.Cloud.run("home:updateAttendanceV2", {
          classId: classId,
          sessionId: sessionId,
          attendance: attendance
        }).then(function (result) {
          console.log("updateAttendanceV2 - result: ".concat(JSON.stringify(result)));

          if (result.attendance.onLeave != undefined) {
            thisComponent.sessionDetails.attendance.onLeave = result.attendance.onLeave;
          }

          if (result.attendance.attendance != undefined) {
            thisComponent.sessionDetails.attendance.attendance = result.attendance.attendance;
          }

          thisComponent.session.attendanceState = thisComponent.toAttendanceStateString(thisComponent.sessionDetails);
          dialog.close();
        }).catch(function (e) {
          console.log("error in updateAttendanceV2: ".concat(e));
          dialog.close();
          thisComponent.$dialog.alert("error in updateAttendance: ".concat(e));
        });
      }).catch(function (e) {
        console.log("error: ".concat(e));
      });
    },
    editSession: function editSession() {
      this.session = this.initSession();
      this.editing = true;
      this.refreshUI();
    },
    onReset: function onReset(evt) {
      evt.preventDefault();
      this.session = this.initSession();
      this.editing = false;
    },
    onSubmit: function onSubmit(evt) {
      evt.preventDefault();

      if (this.classInfo.singleSubmodule) {
        if (this.session.submodules.length > 0) {
          this.session.submodules.splice(0, 1);
        }

        this.addSubmodule();
      }

      var session = this.session;
      console.log("session.submodules: ".concat(JSON.stringify(session.submodules)));

      if (!session.scheduledAt || session.submodules.length < 1) {
        this.$dialog.alert("请输入上课时间和内容！");
        return;
      }

      var options = {
        okText: "确认",
        cancelText: "取消",
        loader: true // default: false - when set to true, the proceed button shows a loader when clicked; and a dialog object will be passed to the then() callback

      };
      var message = {
        title: this.classInfo.name,
        body: "".concat(session.creating ? "创建新课" : "修改", " \u300A").concat(session.name, "\u300B @ ").concat(this.toLocalDateString(session.scheduledAt), "\uFF1F")
      };
      var dt = new Date(session.scheduledAt);
      dt.setHours(session.submodules[0].url.includes("rpsxl") ? 9 : 14); //TODO: allow setting time

      session.scheduledAt = dt; // console.log(`session.scheduledAt: ${session.scheduledAt}`);

      session.classId = this.classInfo.id;
      var thisComponent = this;
      this.$dialog.confirm(message, options).then(function (dialog) {
        parse__WEBPACK_IMPORTED_MODULE_8___default.a.Cloud.run("class:updateClassSessionV2", {
          session: session
        }).then(function (result) {
          console.log("updateClassSession - result: ".concat(JSON.stringify(result)));
          dialog.close(); // thisComponent.$router.go();

          window.location.reload();
        }).catch(function (e) {
          console.log("error in updateClassSession: ".concat(JSON.stringify(e)));
          dialog.close();
          thisComponent.$dialog.alert("error in updateClassSession: ".concat(e));
        });
      }).catch(function (e) {
        console.log("error: ".concat(e));
      });
    }
  }
});

/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/.cache/vue-loader\",\"cacheIdentifier\":\"1d050412-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/ClassSession.vue?vue&type=template&id=0c6ebf2e&":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"1d050412-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/ClassSession.vue?vue&type=template&id=0c6ebf2e& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _c(
    "div",
    [
      _vm.editing
        ? _c(
            "b-form",
            { on: { submit: _vm.onSubmit, reset: _vm.onReset } },
            [
              _c("h4", [
                _vm._v(
                  _vm._s(this.session.creating ? "创建新课" : _vm.session.name)
                )
              ]),
              _c(
                "b-input-group",
                { staticClass: "mt-3", attrs: { prepend: "选择日期：" } },
                [
                  _c("v-date-picker", {
                    attrs: {
                      locale: "zh-CN",
                      "input-props": {
                        readonly: true
                      }
                    },
                    model: {
                      value: _vm.session.scheduledAt,
                      callback: function($$v) {
                        _vm.$set(_vm.session, "scheduledAt", $$v)
                      },
                      expression: "session.scheduledAt"
                    }
                  }),
                  _c(
                    "b-input-group-append",
                    [
                      !_vm.session.creating
                        ? _c(
                            "b-button",
                            { attrs: { type: "reset", variant: "warning" } },
                            [_c("b-icon", { attrs: { icon: "x-circle" } })],
                            1
                          )
                        : _vm._e()
                    ],
                    1
                  )
                ],
                1
              ),
              _vm.moduleDropdownOptions.length > 1
                ? _c(
                    "b-input-group",
                    { staticClass: "mt-3", attrs: { prepend: "选择模块：" } },
                    [
                      _c("b-form-select", {
                        attrs: { options: _vm.moduleDropdownOptions },
                        on: { change: _vm.refreshUI },
                        model: {
                          value: _vm.session.moduleId,
                          callback: function($$v) {
                            _vm.$set(_vm.session, "moduleId", $$v)
                          },
                          expression: "session.moduleId"
                        }
                      })
                    ],
                    1
                  )
                : _vm._e(),
              _c(
                "b-input-group",
                { staticClass: "mt-3", attrs: { prepend: "选子模块：" } },
                [
                  _c("b-form-select", {
                    attrs: { options: _vm.submoduleDropdownOptions },
                    model: {
                      value: _vm.session.submoduleId,
                      callback: function($$v) {
                        _vm.$set(_vm.session, "submoduleId", $$v)
                      },
                      expression: "session.submoduleId"
                    }
                  }),
                  _c(
                    "b-input-group-append",
                    [
                      _vm.canAddSubmodule
                        ? _c(
                            "b-button",
                            {
                              attrs: { variant: "warning" },
                              on: {
                                click: function($event) {
                                  return _vm.addSubmodule()
                                }
                              }
                            },
                            [_vm._v("加入上课内容")]
                          )
                        : _vm._e(),
                      _c(
                        "b-button",
                        { attrs: { type: "submit", variant: "success" } },
                        [_c("b-icon", { attrs: { icon: "check-circle" } })],
                        1
                      )
                    ],
                    1
                  )
                ],
                1
              ),
              !_vm.classInfo.singleSubmodule
                ? _c(
                    "div",
                    [
                      _vm._l(_vm.session.submodules, function(
                        submodule,
                        index
                      ) {
                        return _c(
                          "b-input-group",
                          {
                            key: submodule.id + index,
                            staticClass: "mt-3",
                            attrs: { prepend: "上课内容：" }
                          },
                          [
                            _c("b-form-input", {
                              attrs: {
                                readonly: "",
                                value: "(" + (index + 1) + ") " + submodule.name
                              }
                            }),
                            _c(
                              "b-input-group-append",
                              [
                                _c(
                                  "b-button",
                                  {
                                    attrs: { variant: "warning" },
                                    on: {
                                      click: function($event) {
                                        return _vm.removeSubmodule(index)
                                      }
                                    }
                                  },
                                  [_vm._v("删除")]
                                )
                              ],
                              1
                            )
                          ],
                          1
                        )
                      }),
                      _vm.session.submodules.length > 0
                        ? _c(
                            "b-input-group",
                            {
                              staticClass: "mt-3",
                              attrs: { prepend: "上课名称：" }
                            },
                            [
                              _c("b-form-input", {
                                model: {
                                  value: _vm.session.name,
                                  callback: function($$v) {
                                    _vm.$set(_vm.session, "name", $$v)
                                  },
                                  expression: "session.name"
                                }
                              })
                            ],
                            1
                          )
                        : _vm._e()
                    ],
                    2
                  )
                : _vm._e(),
              !_vm.session.creating
                ? _c(
                    "div",
                    [
                      _c(
                        "b-input-group",
                        {
                          staticClass: "mt-3",
                          attrs: { prepend: "材料链接：", type: "url" }
                        },
                        [
                          _c("b-form-input", {
                            model: {
                              value: _vm.session.materialUrl,
                              callback: function($$v) {
                                _vm.$set(_vm.session, "materialUrl", $$v)
                              },
                              expression: "session.materialUrl"
                            }
                          })
                        ],
                        1
                      ),
                      _c(
                        "b-input-group",
                        {
                          staticClass: "mt-3",
                          attrs: { prepend: "材料名称：" }
                        },
                        [
                          _c("b-form-input", {
                            model: {
                              value: _vm.session.materialName,
                              callback: function($$v) {
                                _vm.$set(_vm.session, "materialName", $$v)
                              },
                              expression: "session.materialName"
                            }
                          }),
                          _c(
                            "b-button",
                            {
                              attrs: { variant: "warning" },
                              on: {
                                click: function($event) {
                                  return _vm.addMaterial()
                                }
                              }
                            },
                            [_vm._v("加入上课材料")]
                          )
                        ],
                        1
                      ),
                      _vm._l(_vm.session.materials, function(material, index) {
                        return _c(
                          "b-input-group",
                          {
                            key: material.url + index,
                            staticClass: "mt-3",
                            attrs: { prepend: "上课材料：" }
                          },
                          [
                            _c("b-form-input", {
                              attrs: {
                                readonly: "",
                                value: "(" + (index + 1) + ") " + material.name
                              }
                            }),
                            _c(
                              "b-input-group-append",
                              [
                                _c(
                                  "b-button",
                                  {
                                    attrs: { variant: "warning" },
                                    on: {
                                      click: function($event) {
                                        return _vm.removeMaterial(index)
                                      }
                                    }
                                  },
                                  [_vm._v("删除")]
                                )
                              ],
                              1
                            )
                          ],
                          1
                        )
                      })
                    ],
                    2
                  )
                : _vm._e(),
              _c("b-form-textarea", {
                attrs: {
                  placeholder: "输入上课通知",
                  rows: "8",
                  "max-rows": "20"
                },
                model: {
                  value: _vm.session.description,
                  callback: function($$v) {
                    _vm.$set(_vm.session, "description", $$v)
                  },
                  expression: "session.description"
                }
              })
            ],
            1
          )
        : _c(
            "b-card",
            { staticClass: "text-center", attrs: { header: _vm.session.name } },
            [
              _c(
                "b-card-text",
                [
                  _c(
                    "b-input-group",
                    { staticClass: "mt-3", attrs: { prepend: "上课时间：" } },
                    [
                      _c("b-form-input", {
                        attrs: { readonly: "" },
                        model: {
                          value: _vm.session.scheduledAtLocalDateTimeString,
                          callback: function($$v) {
                            _vm.$set(
                              _vm.session,
                              "scheduledAtLocalDateTimeString",
                              $$v
                            )
                          },
                          expression: "session.scheduledAtLocalDateTimeString"
                        }
                      }),
                      _c(
                        "b-input-group-append",
                        [
                          !_vm.forApplication &&
                          _vm.classInfo &&
                          !_vm.session.creating &&
                          (_vm.isClassAdmin || _vm.isTeachingAssistant)
                            ? _c(
                                "b-button",
                                {
                                  attrs: { variant: "warning" },
                                  on: { click: _vm.editSession }
                                },
                                [_vm._v("修改")]
                              )
                            : _vm._e()
                        ],
                        1
                      )
                    ],
                    1
                  ),
                  _vm.sessionDetails.submodules.length == 1
                    ? _c(
                        "b-input-group",
                        {
                          staticClass: "mt-3",
                          attrs: { prepend: "课前学习：" }
                        },
                        [
                          _c("b-form-input", {
                            attrs: { readonly: "" },
                            model: {
                              value: _vm.session.prestudyState,
                              callback: function($$v) {
                                _vm.$set(_vm.session, "prestudyState", $$v)
                              },
                              expression: "session.prestudyState"
                            }
                          }),
                          _c(
                            "b-input-group-append",
                            [
                              _c(
                                "b-button",
                                {
                                  attrs: {
                                    variant: "info",
                                    href: _vm.sessionDetails.submodules[0].url,
                                    target: "_blank"
                                  }
                                },
                                [_c("b-icon", { attrs: { icon: "book" } })],
                                1
                              )
                            ],
                            1
                          )
                        ],
                        1
                      )
                    : _vm._l(_vm.sessionDetails.submodules, function(
                        submodule,
                        index
                      ) {
                        return _c(
                          "div",
                          { key: submodule.id + index },
                          [
                            _c(
                              "b-link",
                              {
                                attrs: { href: submodule.url, target: "_blank" }
                              },
                              [
                                _vm._v(
                                  _vm._s(
                                    "(" + (index + 1) + ") " + submodule.name
                                  )
                                )
                              ]
                            ),
                            _c(
                              "b-input-group",
                              {
                                staticClass: "mt-3",
                                attrs: { prepend: "课前学习：" }
                              },
                              [
                                _c("b-form-input", {
                                  attrs: {
                                    readonly: "",
                                    value: _vm.toPrestudyStateString(
                                      _vm.sessionDetails,
                                      index
                                    )
                                  }
                                }),
                                _c(
                                  "b-input-group-append",
                                  [
                                    _c(
                                      "b-button",
                                      {
                                        attrs: {
                                          variant: "info",
                                          href: submodule.url,
                                          target: "_blank"
                                        }
                                      },
                                      [
                                        _c("b-icon", {
                                          attrs: { icon: "book" }
                                        })
                                      ],
                                      1
                                    )
                                  ],
                                  1
                                )
                              ],
                              1
                            )
                          ],
                          1
                        )
                      }),
                  !_vm.session.forApplication
                    ? _c(
                        "b-input-group",
                        {
                          staticClass: "mt-3",
                          attrs: { prepend: "共修出席：" }
                        },
                        [
                          _c("b-form-input", {
                            attrs: { readonly: "" },
                            model: {
                              value: _vm.session.attendanceState,
                              callback: function($$v) {
                                _vm.$set(_vm.session, "attendanceState", $$v)
                              },
                              expression: "session.attendanceState"
                            }
                          }),
                          _c(
                            "b-input-group-append",
                            [
                              _vm.needToShowAttendanceButton()
                                ? _c(
                                    "b-button",
                                    {
                                      attrs: { variant: "warning" },
                                      on: {
                                        click: function($event) {
                                          return _vm.updateAttendance()
                                        }
                                      }
                                    },
                                    [_vm._v(_vm._s(_vm.attendanceButtonName()))]
                                  )
                                : _vm._e(),
                              _c(
                                "b-button",
                                {
                                  attrs: { variant: "info" },
                                  on: {
                                    click: function($event) {
                                      _vm.session.showMoreDetails = !_vm.session
                                        .showMoreDetails
                                    }
                                  }
                                },
                                [
                                  _vm.session.showMoreDetails
                                    ? _c("b-icon", {
                                        attrs: { icon: "chevron-double-up" }
                                      })
                                    : _c("b-icon", {
                                        attrs: { icon: "chevron-double-down" }
                                      })
                                ],
                                1
                              )
                            ],
                            1
                          )
                        ],
                        1
                      )
                    : _vm._e(),
                  _vm.session.showMoreDetails
                    ? _c(
                        "div",
                        [
                          _vm._l(_vm.session.materials, function(
                            material,
                            index
                          ) {
                            return _c(
                              "b-input-group",
                              {
                                key: material.url + index,
                                staticClass: "mt-3",
                                attrs: { prepend: "上课材料：" }
                              },
                              [
                                _c("b-form-input", {
                                  attrs: {
                                    readonly: "",
                                    value:
                                      "(" + (index + 1) + ") " + material.name
                                  }
                                }),
                                _c(
                                  "b-input-group-append",
                                  [
                                    _c(
                                      "b-button",
                                      {
                                        attrs: {
                                          variant: "info",
                                          href: material.url,
                                          target: "_blank"
                                        }
                                      },
                                      [
                                        _c("b-icon", {
                                          attrs: { icon: "book" }
                                        })
                                      ],
                                      1
                                    )
                                  ],
                                  1
                                )
                              ],
                              1
                            )
                          }),
                          _c("b-form-textarea", {
                            attrs: {
                              placeholder: "",
                              rows: "8",
                              "max-rows": "20",
                              readonly: ""
                            },
                            model: {
                              value: _vm.session.description,
                              callback: function($$v) {
                                _vm.$set(_vm.session, "description", $$v)
                              },
                              expression: "session.description"
                            }
                          })
                        ],
                        2
                      )
                    : _vm._e()
                ],
                2
              )
            ],
            1
          )
    ],
    1
  )
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ "./node_modules/core-js/modules/_strict-method.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/_strict-method.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(/*! ./_fails */ "./node_modules/core-js/modules/_fails.js");

module.exports = function (method, arg) {
  return !!method && fails(function () {
    // eslint-disable-next-line no-useless-call
    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);
  });
};


/***/ }),

/***/ "./node_modules/core-js/modules/es6.array.sort.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/es6.array.sort.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(/*! ./_export */ "./node_modules/core-js/modules/_export.js");
var aFunction = __webpack_require__(/*! ./_a-function */ "./node_modules/core-js/modules/_a-function.js");
var toObject = __webpack_require__(/*! ./_to-object */ "./node_modules/core-js/modules/_to-object.js");
var fails = __webpack_require__(/*! ./_fails */ "./node_modules/core-js/modules/_fails.js");
var $sort = [].sort;
var test = [1, 2, 3];

$export($export.P + $export.F * (fails(function () {
  // IE8-
  test.sort(undefined);
}) || !fails(function () {
  // V8 bug
  test.sort(null);
  // Old WebKit
}) || !__webpack_require__(/*! ./_strict-method */ "./node_modules/core-js/modules/_strict-method.js")($sort)), 'Array', {
  // 22.1.3.25 Array.prototype.sort(comparefn)
  sort: function sort(comparefn) {
    return comparefn === undefined
      ? $sort.call(toObject(this))
      : $sort.call(toObject(this), aFunction(comparefn));
  }
});


/***/ }),

/***/ "./src/components/ClassSession.vue":
/*!*****************************************!*\
  !*** ./src/components/ClassSession.vue ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ClassSession_vue_vue_type_template_id_0c6ebf2e___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ClassSession.vue?vue&type=template&id=0c6ebf2e& */ "./src/components/ClassSession.vue?vue&type=template&id=0c6ebf2e&");
/* harmony import */ var _ClassSession_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ClassSession.vue?vue&type=script&lang=js& */ "./src/components/ClassSession.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport *//* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");





/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__["default"])(
  _ClassSession_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _ClassSession_vue_vue_type_template_id_0c6ebf2e___WEBPACK_IMPORTED_MODULE_0__["render"],
  _ClassSession_vue_vue_type_template_id_0c6ebf2e___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (true) {
  var api = __webpack_require__(/*! ./node_modules/vue-hot-reload-api/dist/index.js */ "./node_modules/vue-hot-reload-api/dist/index.js")
  api.install(__webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js"))
  if (api.compatible) {
    module.hot.accept()
    if (!api.isRecorded('0c6ebf2e')) {
      api.createRecord('0c6ebf2e', component.options)
    } else {
      api.reload('0c6ebf2e', component.options)
    }
    module.hot.accept(/*! ./ClassSession.vue?vue&type=template&id=0c6ebf2e& */ "./src/components/ClassSession.vue?vue&type=template&id=0c6ebf2e&", function(__WEBPACK_OUTDATED_DEPENDENCIES__) { /* harmony import */ _ClassSession_vue_vue_type_template_id_0c6ebf2e___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ClassSession.vue?vue&type=template&id=0c6ebf2e& */ "./src/components/ClassSession.vue?vue&type=template&id=0c6ebf2e&");
(function () {
      api.rerender('0c6ebf2e', {
        render: _ClassSession_vue_vue_type_template_id_0c6ebf2e___WEBPACK_IMPORTED_MODULE_0__["render"],
        staticRenderFns: _ClassSession_vue_vue_type_template_id_0c6ebf2e___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]
      })
    })(__WEBPACK_OUTDATED_DEPENDENCIES__); }.bind(this))
  }
}
component.options.__file = "src/components/ClassSession.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/components/ClassSession.vue?vue&type=script&lang=js&":
/*!******************************************************************!*\
  !*** ./src/components/ClassSession.vue?vue&type=script&lang=js& ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_babel_loader_lib_index_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ClassSession_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib??vue-loader-options!./ClassSession.vue?vue&type=script&lang=js& */ "./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/ClassSession.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__["default"] = (_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_babel_loader_lib_index_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ClassSession_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/components/ClassSession.vue?vue&type=template&id=0c6ebf2e&":
/*!************************************************************************!*\
  !*** ./src/components/ClassSession.vue?vue&type=template&id=0c6ebf2e& ***!
  \************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_1d050412_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ClassSession_vue_vue_type_template_id_0c6ebf2e___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"1d050412-vue-loader-template"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib??vue-loader-options!./ClassSession.vue?vue&type=template&id=0c6ebf2e& */ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/.cache/vue-loader\",\"cacheIdentifier\":\"1d050412-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/ClassSession.vue?vue&type=template&id=0c6ebf2e&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_1d050412_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ClassSession_vue_vue_type_template_id_0c6ebf2e___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_1d050412_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ClassSession_vue_vue_type_template_id_0c6ebf2e___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ })

}]);
//# sourceMappingURL=2.js.map