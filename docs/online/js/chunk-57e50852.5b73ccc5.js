(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57e50852"],{"0390":function(t,e,n){"use strict";var r=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"0bfb":function(t,e,n){"use strict";var r=n("cb7c");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"214f":function(t,e,n){"use strict";n("b0c5");var r=n("2aba"),a=n("32e9"),s=n("79e5"),i=n("be13"),o=n("2b4c"),c=n("520a"),l=o("species"),u=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),p=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=o(t),h=!s((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),b=h?!s((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[l]=function(){return n}),n[d](""),!e})):void 0;if(!h||!b||"replace"===t&&!u||"split"===t&&!p){var f=/./[d],v=n(i,d,""[t],(function(t,e,n,r,a){return e.exec===c?h&&!a?{done:!0,value:f.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),g=v[0],m=v[1];r(String.prototype,t,g),a(RegExp.prototype,d,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},"520a":function(t,e,n){"use strict";var r=n("0bfb"),a=RegExp.prototype.exec,s=String.prototype.replace,i=a,o="lastIndex",c=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t[o]||0!==e[o]}(),l=void 0!==/()??/.exec("")[1],u=c||l;u&&(i=function(t){var e,n,i,u,p=this;return l&&(n=new RegExp("^"+p.source+"$(?!\\s)",r.call(p))),c&&(e=p[o]),i=a.call(p,t),c&&i&&(p[o]=p.global?i.index+i[0].length:e),l&&i&&i.length>1&&s.call(i[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(i[u]=void 0)})),i}),t.exports=i},"5f1b":function(t,e,n){"use strict";var r=n("23c6"),a=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var s=n.call(t,e);if("object"!==typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},a481:function(t,e,n){"use strict";var r=n("cb7c"),a=n("4bf8"),s=n("9def"),i=n("4588"),o=n("0390"),c=n("5f1b"),l=Math.max,u=Math.min,p=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,b=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,(function(t,e,n,f){return[function(r,a){var s=t(this),i=void 0==r?void 0:r[e];return void 0!==i?i.call(r,s,a):n.call(String(s),r,a)},function(t,e){var a=f(n,t,this,e);if(a.done)return a.value;var p=r(t),d=String(this),h="function"===typeof e;h||(e=String(e));var g=p.global;if(g){var m=p.unicode;p.lastIndex=0}var x=[];while(1){var S=c(p,d);if(null===S)break;if(x.push(S),!g)break;var w=String(S[0]);""===w&&(p.lastIndex=o(d,s(p.lastIndex),m))}for(var O="",y=0,j=0;j<x.length;j++){S=x[j];for(var C=String(S[0]),_=l(u(i(S.index),d.length),0),D=[],k=1;k<S.length;k++)D.push(b(S[k]));var E=S.groups;if(h){var $=[C].concat(D,_,d);void 0!==E&&$.push(E);var T=String(e.apply(void 0,$))}else T=v(C,d,_,D,E,e);_>=y&&(O+=d.slice(y,_)+T,y=_+C.length)}return O+d.slice(y)}];function v(t,e,r,s,i,o){var c=r+t.length,l=s.length,u=h;return void 0!==i&&(i=a(i),u=d),n.call(o,u,(function(n,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(c);case"<":o=i[a.slice(1,-1)];break;default:var u=+a;if(0===u)return n;if(u>l){var d=p(u/10);return 0===d?n:d<=l?void 0===s[d-1]?a.charAt(1):s[d-1]+a.charAt(1):n}o=s[u-1]}return void 0===o?"":o}))}}))},b0c5:function(t,e,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},bb51:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isLoadingDashboards?n("div",{staticClass:"user-preview"},[t._v("\n    正在获取主页数据...\n  ")]):n("div",[t.home.studentDashboard?n("div",{staticClass:"user-preview"},[n("StudentDashboard",{attrs:{dashboard:t.home.studentDashboard}})],1):n("div",[n("h1",[t._v("TODO")])])])])},a=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),i=(n("f559"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-preview"},[0===t.dashboard.classes.length?n("div",{staticClass:"user-preview"},[t._v("\n    您还没有参加任何佛学课程！\n  ")]):t._l(t.dashboard.classes,(function(t,e){return n("Class",{key:e,attrs:{buddhaClass:t}})}))],2)}),o=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",{domProps:{textContent:t._s(t.buddhaClass.name)}}),n("h4",[t._v("辅导员："+t._s(t.teachers)+" 师兄")]),n("b-button",{attrs:{block:"",variant:"info",href:t.buddhaClass.url,target:"_blank"}},[t._v("学习资料网页")]),0===t.buddhaClass.classSessions.length?n("div",{staticClass:"user-preview"},[t._v("\n    还没有开课，敬请期待！\n  ")]):n("div",{staticClass:"user-preview"},[n("h4",[t._v("正在闻思")]),t._l(t.buddhaClass.classSessions,(function(t,e){return n("ClassSession",{key:t.id+e,attrs:{classSession:t}})})),n("b-button",{attrs:{block:"",variant:"info",href:t.buddhaClass.url,target:"_blank"}},[t._v("查看上课记录")]),t.buddhaClass.practices.length>0?n("h4",[t._v("正在实修")]):t._e(),t._l(t.buddhaClass.practices,(function(t,e){return n("Practice",{key:t.id+e,attrs:{practice:t}})}))],2)],1)},l=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticClass:"text-center",attrs:{header:t.session.name}},[n("b-card-text",[n("b-input-group",{staticClass:"mt-3",attrs:{prepend:"上课时间："}},[n("b-form-input",{attrs:{readonly:""},model:{value:t.session.scheduledAtLocalDateTimeString,callback:function(e){t.$set(t.session,"scheduledAtLocalDateTimeString",e)},expression:"session.scheduledAtLocalDateTimeString"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"info",href:t.addToGoogleCalendarUrl(),target:"_blank"}},[n("b-icon",{attrs:{icon:"calendar-plus"}})],1)],1)],1),n("b-input-group",{staticClass:"mt-3",attrs:{prepend:"课前学习："}},[n("b-form-input",{attrs:{readonly:""},model:{value:t.session.materialState,callback:function(e){t.$set(t.session,"materialState",e)},expression:"session.materialState"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"info",href:t.session.url,target:"_blank"}},[n("b-icon",{attrs:{icon:"book"}})],1)],1)],1),n("b-input-group",{staticClass:"mt-3",attrs:{prepend:"上课出勤："}},[n("b-form-input",{attrs:{readonly:""},model:{value:t.session.attendanceState,callback:function(e){t.$set(t.session,"attendanceState",e)},expression:"session.attendanceState"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"warning"}},[t._v(t._s(t.attendanceButtonName()))]),n("b-button",{attrs:{variant:"info"},on:{click:function(e){t.session.showDescription=!t.session.showDescription}}},[t.session.showDescription?n("b-icon",{attrs:{icon:"chevron-double-up"}}):n("b-icon",{attrs:{icon:"chevron-double-down"}})],1)],1)],1),t.session.showDescription?n("b-form-textarea",{attrs:{placeholder:"Auto height textarea",rows:"3","max-rows":"8"},model:{value:t.session.description,callback:function(e){t.$set(t.session,"description",e)},expression:"session.description"}}):t._e()],1)],1)],1)},p=[],d=(n("7f7f"),n("a481"),{name:"ClassSession",props:{classSession:{type:Object,required:!0}},data:function(){return{session:{id:this.classSession.get("objectId"),name:this.classSession.get("name"),url:this.classSession.get("url"),description:this.classSession.get("description"),scheduledAtLocalDateTimeString:this.toLocalDateTimeString(this.classSession.get("scheduledAt")),showDescription:!1,attendanceState:"未报考勤",materialState:"未看传承/未看法本"}}},methods:{toLocalDateTimeString:function(t){var e={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};return t.toLocaleDateString("zh-CN",e)},addToGoogleCalendarUrl:function(){var t=this.classSession.get("scheduledAt"),e=new Date;e.setTime(t.getTime()+144e5),t=t.toISOString().replace(/.000/g,"").replace(/:/g,"").replace(/-/g,""),e=e.toISOString().replace(/.000/g,"").replace(/:/g,"").replace(/-/g,""),console.log(t);var n="".concat(this.session.name,"&details=").concat(this.session.description);return n=encodeURI(n),n="https://www.google.com/calendar/render?action=TEMPLATE&text=".concat(n,"&dates=").concat(t,"%2F").concat(e),console.log(n),n},attendanceButtonName:function(){var t=new Date;return t<this.classSession.get("scheduledAt")?"我要请假":"我要报考勤"}}}),h=d,b=n("2877"),f=Object(b["a"])(h,u,p,!1,null,null,null),v=f.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticClass:"text-center",attrs:{header:t.practiceObj.name}},[n("b-card-text",[n("b-input-group",{staticClass:"mt-3",attrs:{prepend:"最新报数："}},[n("b-form-input",{attrs:{readonly:""},model:{value:t.practiceObj.practiceReportingState,callback:function(e){t.$set(t.practiceObj,"practiceReportingState",e)},expression:"practiceObj.practiceReportingState"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"warning"}},[t._v("我要报数")]),n("b-button",{attrs:{variant:"info"},on:{click:function(e){t.practiceObj.showDescription=!t.practiceObj.showDescription}}},[t.practiceObj.showDescription?n("b-icon",{attrs:{icon:"chevron-double-up"}}):n("b-icon",{attrs:{icon:"chevron-double-down"}})],1)],1)],1),t.practiceObj.showDescription?n("b-form-textarea",{attrs:{placeholder:"Auto height textarea",rows:"3","max-rows":"8"},model:{value:t.practiceObj.description,callback:function(e){t.$set(t.practiceObj,"description",e)},expression:"practiceObj.description"}}):t._e()],1)],1)],1)},m=[],x={name:"Practice",props:{practice:{type:Object,required:!0}},data:function(){return{practiceObj:{id:this.practice.get("objectId"),name:this.practice.get("name"),description:this.practice.get("description"),showDescription:!1,practiceReportingState:"未报数"}}},methods:{toLocalDateTimeString:function(t){var e={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};return t.toLocaleDateString("zh-CN",e)}}},S=x,w=Object(b["a"])(S,g,m,!1,null,null,null),O=w.exports,y={name:"Class",components:{ClassSession:v,Practice:O},props:{buddhaClass:{type:Object,required:!0}},data:function(){return{teachers:this.buddhaClass.teachers.join()}},methods:{createUser:function(){this.$router.push({name:"userCreate"})}}},j=y,C=Object(b["a"])(j,c,l,!1,null,null,null),_=C.exports,D={name:"StudentDashboard",props:{dashboard:{type:Object,required:!0}},components:{Class:_}},k=D,E=Object(b["a"])(k,i,o,!1,null,null,null),$=E.exports,T=n("2f62"),P=n("6c33"),R=n("4360");function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={name:"Home",components:{StudentDashboard:$},beforeRouteEnter:function(t,e,n){console.log("from: ".concat(e.path)),e&&e.path&&e.path.startsWith("/home")?n():R["a"].dispatch(P["c"]).then((function(){n()}))},computed:L({},Object(T["b"])(["home","isLoadingDashboards"])),mounted:function(){}},M=I,q=Object(b["a"])(M,r,a,!1,null,null,null);e["default"]=q.exports},f559:function(t,e,n){"use strict";var r=n("5ca1"),a=n("9def"),s=n("d2c8"),i="startsWith",o=""[i];r(r.P+r.F*n("5147")(i),"String",{startsWith:function(t){var e=s(this,t,i),n=a(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return o?o.call(e,r,n):e.slice(n,n+r.length)===r}})}}]);
//# sourceMappingURL=chunk-57e50852.5b73ccc5.js.map